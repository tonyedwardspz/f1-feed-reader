<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-material/paper-material.html">
<link rel="import" href="../../bower_components/paper-ripple/paper-ripple.html">
<link rel="import" href="../../bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="../elements.html">

<dom-module id="driver-standings">
  <template>
    <iron-ajax
    auto
    url="http://ergast.com/api/f1/current/driverStandings.json"
    handle-as="json" 
    last-response="{{data}}"></iron-ajax>
    <style>
      :host {
        display: block;
      }
    </style>
    <template is="dom-repeat" items="{{driverList}}">
    <div>{{item.Driver.givenName}}</div>
    </template>
  </template>
  <script>
  (function() {
    'use strict';

    Polymer({
      is: 'driver-standings',
      properties: {
        foo: {
          type: String,
          value: 'driver-standings',
          notify: true
        },
        data: {
        },
        driverList: {
          computed: "processDrivers(data)"
        }
      },
      processDrivers: function (data){
        console.log(data.MRData.StandingsTable.StandingsLists[0].DriverStandings)
        return data.MRData.StandingsTable.StandingsLists[0].DriverStandings;
      }
    });
  })();
  </script>
</dom-module>
